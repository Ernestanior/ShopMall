{"remainingRequest":"C:\\Users\\17127\\Desktop\\IT\\vue\\教学2\\shopmall\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\17127\\Desktop\\IT\\vue\\教学2\\shopmall\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\17127\\Desktop\\IT\\vue\\教学2\\shopmall\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!C:\\Users\\17127\\Desktop\\IT\\vue\\教学2\\shopmall\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\17127\\Desktop\\IT\\vue\\教学2\\shopmall\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\17127\\Desktop\\IT\\vue\\教学2\\shopmall\\src\\views\\detail\\GoodsDetail.vue?vue&type=template&id=dc912408&scoped=true","dependencies":[{"path":"C:\\Users\\17127\\Desktop\\IT\\vue\\教学2\\shopmall\\src\\views\\detail\\GoodsDetail.vue","mtime":1611712270964},{"path":"C:\\Users\\17127\\Desktop\\IT\\vue\\教学2\\shopmall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\17127\\Desktop\\IT\\vue\\教学2\\shopmall\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\17127\\Desktop\\IT\\vue\\教学2\\shopmall\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\17127\\Desktop\\IT\\vue\\教学2\\shopmall\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":499162500000},{"path":"C:\\Users\\17127\\Desktop\\IT\\vue\\教学2\\shopmall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\17127\\Desktop\\IT\\vue\\教学2\\shopmall\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVzb2x2ZUNvbXBvbmVudCBhcyBfcmVzb2x2ZUNvbXBvbmVudCwgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlLCB3aXRoQ3R4IGFzIF93aXRoQ3R4LCB2U2hvdyBhcyBfdlNob3csIHdpdGhEaXJlY3RpdmVzIGFzIF93aXRoRGlyZWN0aXZlcywgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUJsb2NrIGFzIF9jcmVhdGVCbG9jaywgd2l0aFNjb3BlSWQgYXMgX3dpdGhTY29wZUlkLCBwdXNoU2NvcGVJZCBhcyBfcHVzaFNjb3BlSWQsIHBvcFNjb3BlSWQgYXMgX3BvcFNjb3BlSWQgfSBmcm9tICJ2dWUiOwoKdmFyIF93aXRoSWQgPSAvKiNfX1BVUkVfXyovX3dpdGhTY29wZUlkKCJkYXRhLXYtZGM5MTI0MDgiKTsKCl9wdXNoU2NvcGVJZCgiZGF0YS12LWRjOTEyNDA4Iik7Cgp2YXIgX2hvaXN0ZWRfMSA9IHsKICBpZDogImRldGFpbCIKfTsKCl9wb3BTY29wZUlkKCk7CgpleHBvcnQgdmFyIHJlbmRlciA9IC8qI19fUFVSRV9fKi9fd2l0aElkKGZ1bmN0aW9uIChfY3R4LCBfY2FjaGUsICRwcm9wcywgJHNldHVwLCAkZGF0YSwgJG9wdGlvbnMpIHsKICB2YXIgX2NvbXBvbmVudF9kZXRhaWxfbmF2ID0gX3Jlc29sdmVDb21wb25lbnQoImRldGFpbC1uYXYiKTsKCiAgdmFyIF9jb21wb25lbnRfZGV0YWlsX3N3aXBlciA9IF9yZXNvbHZlQ29tcG9uZW50KCJkZXRhaWwtc3dpcGVyIik7CgogIHZhciBfY29tcG9uZW50X2RldGFpbF9iYXNlX2luZm8gPSBfcmVzb2x2ZUNvbXBvbmVudCgiZGV0YWlsLWJhc2UtaW5mbyIpOwoKICB2YXIgX2NvbXBvbmVudF9kZXRhaWxfc2hvcF9pbmZvID0gX3Jlc29sdmVDb21wb25lbnQoImRldGFpbC1zaG9wLWluZm8iKTsKCiAgdmFyIF9jb21wb25lbnRfZGV0YWlsX2dvb2RzX2luZm8gPSBfcmVzb2x2ZUNvbXBvbmVudCgiZGV0YWlsLWdvb2RzLWluZm8iKTsKCiAgdmFyIF9jb21wb25lbnRfZGV0YWlsX3BhcmFtX2luZm8gPSBfcmVzb2x2ZUNvbXBvbmVudCgiZGV0YWlsLXBhcmFtLWluZm8iKTsKCiAgdmFyIF9jb21wb25lbnRfZGV0YWlsX2NvbW1lbnRfaW5mbyA9IF9yZXNvbHZlQ29tcG9uZW50KCJkZXRhaWwtY29tbWVudC1pbmZvIik7CgogIHZhciBfY29tcG9uZW50X2dvb2RzX2xpc3QgPSBfcmVzb2x2ZUNvbXBvbmVudCgiZ29vZHMtbGlzdCIpOwoKICB2YXIgX2NvbXBvbmVudF9zY3JvbGwgPSBfcmVzb2x2ZUNvbXBvbmVudCgic2Nyb2xsIik7CgogIHZhciBfY29tcG9uZW50X2JhY2tfdG9wID0gX3Jlc29sdmVDb21wb25lbnQoImJhY2stdG9wIik7CgogIHZhciBfY29tcG9uZW50X2RldGFpbF9ib3RfYmFyID0gX3Jlc29sdmVDb21wb25lbnQoImRldGFpbC1ib3QtYmFyIik7CgogIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jaygiZGl2IiwgX2hvaXN0ZWRfMSwgW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2RldGFpbF9uYXYsIHsKICAgIHJlZjogImRldGFpbF9uYXYiLAogICAgY2xhc3M6ICJkZXRhaWxfbmF2IiwKICAgIG9uVGl0bGVDbGljazogJG9wdGlvbnMudGl0bGVDbGljawogIH0sIG51bGwsIDgsIFsib25UaXRsZUNsaWNrIl0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9zY3JvbGwsIHsKICAgIGNsYXNzOiAiY29udGVudCIsCiAgICByZWY6ICJzY3JvbGwiLAogICAgInByb2JlLXR5cGUiOiAzLAogICAgb25TY3JvbGw6ICRvcHRpb25zLmNvbnRlbnRTY3JvbGwKICB9LCB7CiAgICBkZWZhdWx0OiBfd2l0aElkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9kZXRhaWxfc3dpcGVyLCB7CiAgICAgICAgInRvcC1pbWciOiAkZGF0YS50b3BJbWcKICAgICAgfSwgbnVsbCwgOCwgWyJ0b3AtaW1nIl0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9kZXRhaWxfYmFzZV9pbmZvLCB7CiAgICAgICAgZ29vZHM6ICRkYXRhLmdvb2RzCiAgICAgIH0sIG51bGwsIDgsIFsiZ29vZHMiXSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X2RldGFpbF9zaG9wX2luZm8sIHsKICAgICAgICBzaG9wOiAkZGF0YS5zaG9wCiAgICAgIH0sIG51bGwsIDgsIFsic2hvcCJdKSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZGV0YWlsX2dvb2RzX2luZm8sIHsKICAgICAgICAiZGV0YWlsLWluZm8iOiAkZGF0YS5kZXRhaWxJbmZvLAogICAgICAgIG9uSW1nTG9hZDogJG9wdGlvbnMuaW1nTG9hZAogICAgICB9LCBudWxsLCA4LCBbImRldGFpbC1pbmZvIiwgIm9uSW1nTG9hZCJdKSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZGV0YWlsX3BhcmFtX2luZm8sIHsKICAgICAgICAicGFyYW0taW5mbyI6ICRkYXRhLnBhcmFtSW5mbywKICAgICAgICByZWY6ICJkZXRhaWxfcGFyYW0iCiAgICAgIH0sIG51bGwsIDgsIFsicGFyYW0taW5mbyJdKSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZGV0YWlsX2NvbW1lbnRfaW5mbywgewogICAgICAgICJjb21tZW50LWluZm8iOiAkZGF0YS5jb21tZW50SW5mbywKICAgICAgICByZWY6ICJkZXRhaWxfY29tbWVudCIKICAgICAgfSwgbnVsbCwgOCwgWyJjb21tZW50LWluZm8iXSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X2dvb2RzX2xpc3QsIHsKICAgICAgICBnb29kczogJGRhdGEucmVjb21tZW5kSW5mbywKICAgICAgICByZWY6ICJkZXRhaWxfcmVjb20iCiAgICAgIH0sIG51bGwsIDgsIFsiZ29vZHMiXSldOwogICAgfSksCiAgICBfOiAxCiAgfSwgOCwgWyJvblNjcm9sbCJdKSwgX3dpdGhEaXJlY3RpdmVzKF9jcmVhdGVWTm9kZShfY29tcG9uZW50X2JhY2tfdG9wLCB7CiAgICBvbkNsaWNrOiBfY3R4LmJhY2tDbGljawogIH0sIG51bGwsIDgsIFsib25DbGljayJdKSwgW1tfdlNob3csIF9jdHguaXNTaG93QmFja1RvcF1dKSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZGV0YWlsX2JvdF9iYXIsIHsKICAgIG9uQWRkQ2FydDogJG9wdGlvbnMuYWRkQ2FydAogIH0sIG51bGwsIDgsIFsib25BZGRDYXJ0Il0pXSk7Cn0pOw=="},{"version":3,"sources":["C:\\Users\\17127\\Desktop\\IT\\vue\\教学2\\shopmall\\src\\views\\detail\\GoodsDetail.vue"],"names":[],"mappings":";;;;;;;AACO,EAAA,EAAE,EAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;uBAAR,YAAA,CAeM,KAfN,EAAA,UAAA,EAeM,CAdJ,YAAA,CAAuF,qBAAvF,EAAuF;AAA3E,IAAA,GAAG,EAAC,YAAuE;AAA1D,IAAA,KAAK,EAAC,YAAoD;AAAtC,IAAA,YAAW,EAAE,QAAA,CAAA;AAAyB,GAAvF,E,IAAA,E,CAAA,E,gBAAA,CAcI,EAbJ,YAAA,CASS,iBATT,EASS;AATD,IAAA,KAAK,EAAC,SASL;AATe,IAAA,GAAG,EAAC,QASnB;AAT6B,kBAAY,CASzC;AAT6C,IAAA,QAAM,EAAE,QAAA,CAAA;AASrD,GATT,E;qBAEE;AAAA,aAAiD,CAAjD,YAAA,CAAiD,wBAAjD,EAAiD;AAAjC,mBAAS,KAAA,CAAA;AAAwB,OAAjD,EAA+B,IAA/B,EAA+B,CAA/B,EAA+B,CAAA,SAAA,CAA/B,CAAiD,EACjD,YAAA,CAAoD,2BAApD,EAAoD;AAAjC,QAAA,KAAK,EAAE,KAAA,CAAA;AAA0B,OAApD,EAA+B,IAA/B,EAA+B,CAA/B,EAA+B,CAAA,OAAA,CAA/B,CADiD,EAEjD,YAAA,CAAkD,2BAAlD,EAAkD;AAA/B,QAAA,IAAI,EAAE,KAAA,CAAA;AAAyB,OAAlD,EAA6B,IAA7B,EAA6B,CAA7B,EAA6B,CAAA,MAAA,CAA7B,CAFiD,EAGjD,YAAA,CAAoF,4BAApF,EAAoF;AAAhE,uBAAa,KAAA,CAAA,UAAmD;AAAtC,QAAA,SAAO,EAAE,QAAA,CAAA;AAA6B,OAApF,E,IAAA,E,CAAA,E,4BAAA,CAHiD,EAIjD,YAAA,CAAkF,4BAAlF,EAAkF;AAA9D,sBAAY,KAAA,CAAA,SAAkD;AAAvC,QAAA,GAAG,EAAC;AAAmC,OAAlF,E,IAAA,E,CAAA,E,cAAA,CAJiD,EAKjD,YAAA,CAA4F,8BAA5F,EAA4F;AAAtE,wBAAc,KAAA,CAAA,WAAwD;AAA3C,QAAA,GAAG,EAAC;AAAuC,OAA5F,E,IAAA,E,CAAA,E,gBAAA,CALiD,EAMjD,YAAA,CAAmE,qBAAnE,EAAmE;AAAtD,QAAA,KAAK,EAAE,KAAA,CAAA,aAA+C;AAAhC,QAAA,GAAG,EAAC;AAA4B,OAAnE,E,IAAA,E,CAAA,E,SAAA,CANiD,CAAjD;AAAA,K;;GAFF,E,CAAA,E,YAAA,CAaI,E,gBAHJ,YAAA,CAA+D,mBAA/D,EAA+D;AAApD,IAAA,OAAK,EAAE,IAAA,CAAA;AAA6C,GAA/D,EAA2B,IAA3B,EAA2B,CAA3B,EAA2B,CAAA,SAAA,CAA3B,C,EAA2B,C,SAAU,IAAA,CAAA,a,CAAV,C,CAGvB,EAFJ,YAAA,CAAqD,yBAArD,EAAqD;AAApC,IAAA,SAAQ,EAAE,QAAA,CAAA;AAA0B,GAArD,EAAkC,IAAlC,EAAkC,CAAlC,EAAkC,CAAA,WAAA,CAAlC,CAEI,CAfN,C","sourcesContent":["<template>\r\n  <div id=\"detail\">\r\n    <detail-nav ref=\"detail_nav\" class=\"detail_nav\" @title-click=\"titleClick\"></detail-nav>\r\n    <scroll class=\"content\" ref=\"scroll\" :probe-type=\"3\" @scroll=\"contentScroll\">\r\n      <!-- <div>{{$store.state.cartList}}</div> -->\r\n      <detail-swiper :top-img=\"topImg\"></detail-swiper>\r\n      <detail-base-info :goods=\"goods\"></detail-base-info>\r\n      <detail-shop-info :shop=\"shop\"></detail-shop-info>\r\n      <detail-goods-info :detail-info=\"detailInfo\" @imgLoad=\"imgLoad\"></detail-goods-info>\r\n      <detail-param-info :param-info=\"paramInfo\" ref=\"detail_param\"></detail-param-info>\r\n      <detail-comment-info :comment-info=\"commentInfo\" ref=\"detail_comment\"></detail-comment-info>\r\n      <goods-list :goods=\"recommendInfo\" ref=\"detail_recom\"></goods-list>\r\n    </scroll>\r\n    <back-top @click=\"backClick\" v-show=\"isShowBackTop\"></back-top>\r\n    <detail-bot-bar @add-cart=\"addCart\"></detail-bot-bar>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\n  import DetailNav from '@/components/content/details/DetailNav.vue'\r\n  // import GoodsList from '@/components/content/goods/GoodsList.vue'\r\n  import DetailSwiper from './detailcomp/DetailSwiper.vue'\r\n  import DetailBaseInfo from './detailcomp/DetailBaseInfo.vue'\r\n  import DetailShopInfo from './detailcomp/DetailShopInfo.vue'\r\n  import DetailGoodsInfo from './detailcomp/DetailGoodsInfo.vue'\r\n  import DetailParamInfo from './detailcomp/DetailParamInfo.vue'\r\n  import DetailCommentInfo from './detailcomp/DetailCommentInfo.vue'\r\n  import DetailBotBar from './detailcomp/DetailBotBar.vue'\r\n  import GoodsList from './detailcomp/DetailGoodsList.vue'\r\n  import { getGoodsDetail, getRecommend, Goods, Shop, Param } from '@/network/detail.js'\r\n\r\n  import { debounce } from '@/common/utils.js'\r\n  import { backTopMixin } from '@/common/mixin.js'\r\n  import Scroll from '@/components/common/scroll/Scroll.vue'\r\n  export default {\r\n    name: 'GoodsDetail',\r\n    mixins: [backTopMixin],\r\n    components: {\r\n      DetailNav,\r\n      DetailSwiper,\r\n      DetailBaseInfo,\r\n      DetailShopInfo,\r\n      Scroll,\r\n      DetailGoodsInfo,\r\n      DetailParamInfo,\r\n      DetailCommentInfo,\r\n      GoodsList,\r\n      DetailBotBar\r\n    },\r\n    data() {\r\n      return {\r\n        iid: this.$route.query.id,\r\n        topImg: [],\r\n        goods: {},\r\n        shop: {},\r\n        detailInfo: {},\r\n        paramInfo: {},\r\n        commentInfo: {},\r\n        recommendInfo: [],\r\n        topY: [],\r\n        getTopY: null,\r\n        lessRefresh: null\r\n      }\r\n    },\r\n    methods: {\r\n      addCart() {\r\n        const product = {}\r\n        product.image = this.topImg[0]\r\n        product.title = this.goods.title\r\n        product.desc = this.goods.desc\r\n        product.price = this.goods.lowNowPrice\r\n        product.iid = this.iid\r\n        this.$store.dispatch('addCart', product).then(res => { console.log(res) })\r\n      },\r\n      imgLoad() {\r\n        this.lessRefresh()\r\n        this.getTopY()\r\n        // console.log(this.navY);\r\n      },\r\n      titleClick(index) {\r\n        console.log(index);\r\n        this.$refs.scroll.scroll.scrollTo(0, -this.topY[index], 500)\r\n      },\r\n\r\n      contentScroll(position) {\r\n        const y = -position.y\r\n        for (let i in this.topY) {\r\n          let x = parseInt(i)\r\n          if (y >= this.topY[x] && y < this.topY[x + 1]) {\r\n            this.$refs.detail_nav.currentIndex = x\r\n          }\r\n        }\r\n        this.MixGoBackTop(position)\r\n      },\r\n    },\r\n    created() {\r\n      this.iid = this.$route.query.id\r\n      getGoodsDetail(this.iid).then(res => {\r\n        // console.log(res);\r\n        this.topImg = res.itemInfo.topImages\r\n        // console.log(this.topImg);\r\n        //1. 商品详情\r\n        this.goods = new Goods(res.itemInfo, res.columns, res.shopInfo)\r\n        //2. 商家详情\r\n        this.shop = new Shop(res.shopInfo)\r\n        //3. 获取商品详细信息\r\n        this.detailInfo = res.detailInfo\r\n        //4. 获取参数信息\r\n        this.paramInfo = new Param(res.itemParams.info, res.itemParams.rule)\r\n        //5. 获取评论信息\r\n        if (res.rate.cRate !== 0) {\r\n          this.commentInfo = res.rate.list[0]\r\n        }\r\n      })\r\n      getRecommend().then(res => {\r\n        this.recommendInfo = res.list\r\n      })\r\n      this.getTopY = debounce(() => {\r\n        this.topY = []\r\n        this.topY.push(0)\r\n        this.topY.push(this.$refs.detail_param.$el.offsetTop)\r\n        this.topY.push(this.$refs.detail_comment.$el.offsetTop)\r\n        this.topY.push(this.$refs.detail_recom.$el.offsetTop)\r\n        this.topY.push(Number.MAX_VALUE)\r\n      }, 500)\r\n      this.lessRefresh = debounce(() => {\r\n        this.$refs.scroll.refresh()\r\n      }, 500)\r\n    },\r\n  }\r\n</script>\r\n<style scoped>\r\n  #detail {\r\n    position: relative;\r\n    z-index: 9;\r\n    background-color: #fff;\r\n    height: 100vh;\r\n  }\r\n\r\n  .item_img {\r\n    height: 200px;\r\n    width: 50px;\r\n  }\r\n\r\n  .detail_nav {\r\n    position: relative;\r\n    z-index: 9;\r\n    background-color: #fff;\r\n  }\r\n\r\n  .content {\r\n    height: 85vh;\r\n  }\r\n</style>"],"sourceRoot":""}]}
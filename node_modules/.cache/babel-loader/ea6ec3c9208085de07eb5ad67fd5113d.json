{"remainingRequest":"C:\\Users\\17127\\Desktop\\IT\\vue\\教学2\\shopmall\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\17127\\Desktop\\IT\\vue\\教学2\\shopmall\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!C:\\Users\\17127\\Desktop\\IT\\vue\\教学2\\shopmall\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\17127\\Desktop\\IT\\vue\\教学2\\shopmall\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\17127\\Desktop\\IT\\vue\\教学2\\shopmall\\src\\views\\detail\\GoodsDetail.vue?vue&type=template&id=691c5583&scoped=true","dependencies":[{"path":"C:\\Users\\17127\\Desktop\\IT\\vue\\教学2\\shopmall\\src\\views\\detail\\GoodsDetail.vue","mtime":1611712270964},{"path":"C:\\Users\\17127\\Desktop\\IT\\vue\\教学2\\shopmall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\17127\\Desktop\\IT\\vue\\教学2\\shopmall\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\17127\\Desktop\\IT\\vue\\教学2\\shopmall\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":499162500000},{"path":"C:\\Users\\17127\\Desktop\\IT\\vue\\教学2\\shopmall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\17127\\Desktop\\IT\\vue\\教学2\\shopmall\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVzb2x2ZUNvbXBvbmVudCBhcyBfcmVzb2x2ZUNvbXBvbmVudCwgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlLCBjcmVhdGVDb21tZW50Vk5vZGUgYXMgX2NyZWF0ZUNvbW1lbnRWTm9kZSwgd2l0aEN0eCBhcyBfd2l0aEN0eCwgdlNob3cgYXMgX3ZTaG93LCB3aXRoRGlyZWN0aXZlcyBhcyBfd2l0aERpcmVjdGl2ZXMsIG9wZW5CbG9jayBhcyBfb3BlbkJsb2NrLCBjcmVhdGVCbG9jayBhcyBfY3JlYXRlQmxvY2ssIHdpdGhTY29wZUlkIGFzIF93aXRoU2NvcGVJZCwgcHVzaFNjb3BlSWQgYXMgX3B1c2hTY29wZUlkLCBwb3BTY29wZUlkIGFzIF9wb3BTY29wZUlkIH0gZnJvbSAidnVlIjsKCnZhciBfd2l0aElkID0gLyojX19QVVJFX18qL193aXRoU2NvcGVJZCgiZGF0YS12LTY5MWM1NTgzIik7CgpfcHVzaFNjb3BlSWQoImRhdGEtdi02OTFjNTU4MyIpOwoKdmFyIF9ob2lzdGVkXzEgPSB7CiAgaWQ6ICJkZXRhaWwiCn07CgpfcG9wU2NvcGVJZCgpOwoKZXhwb3J0IHZhciByZW5kZXIgPSAvKiNfX1BVUkVfXyovX3dpdGhJZChmdW5jdGlvbiAoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgdmFyIF9jb21wb25lbnRfZGV0YWlsX25hdiA9IF9yZXNvbHZlQ29tcG9uZW50KCJkZXRhaWwtbmF2Iik7CgogIHZhciBfY29tcG9uZW50X2RldGFpbF9zd2lwZXIgPSBfcmVzb2x2ZUNvbXBvbmVudCgiZGV0YWlsLXN3aXBlciIpOwoKICB2YXIgX2NvbXBvbmVudF9kZXRhaWxfYmFzZV9pbmZvID0gX3Jlc29sdmVDb21wb25lbnQoImRldGFpbC1iYXNlLWluZm8iKTsKCiAgdmFyIF9jb21wb25lbnRfZGV0YWlsX3Nob3BfaW5mbyA9IF9yZXNvbHZlQ29tcG9uZW50KCJkZXRhaWwtc2hvcC1pbmZvIik7CgogIHZhciBfY29tcG9uZW50X2RldGFpbF9nb29kc19pbmZvID0gX3Jlc29sdmVDb21wb25lbnQoImRldGFpbC1nb29kcy1pbmZvIik7CgogIHZhciBfY29tcG9uZW50X2RldGFpbF9wYXJhbV9pbmZvID0gX3Jlc29sdmVDb21wb25lbnQoImRldGFpbC1wYXJhbS1pbmZvIik7CgogIHZhciBfY29tcG9uZW50X2RldGFpbF9jb21tZW50X2luZm8gPSBfcmVzb2x2ZUNvbXBvbmVudCgiZGV0YWlsLWNvbW1lbnQtaW5mbyIpOwoKICB2YXIgX2NvbXBvbmVudF9nb29kc19saXN0ID0gX3Jlc29sdmVDb21wb25lbnQoImdvb2RzLWxpc3QiKTsKCiAgdmFyIF9jb21wb25lbnRfc2Nyb2xsID0gX3Jlc29sdmVDb21wb25lbnQoInNjcm9sbCIpOwoKICB2YXIgX2NvbXBvbmVudF9iYWNrX3RvcCA9IF9yZXNvbHZlQ29tcG9uZW50KCJiYWNrLXRvcCIpOwoKICB2YXIgX2NvbXBvbmVudF9kZXRhaWxfYm90X2JhciA9IF9yZXNvbHZlQ29tcG9uZW50KCJkZXRhaWwtYm90LWJhciIpOwoKICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soImRpdiIsIF9ob2lzdGVkXzEsIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9kZXRhaWxfbmF2LCB7CiAgICByZWY6ICJkZXRhaWxfbmF2IiwKICAgIGNsYXNzOiAiZGV0YWlsX25hdiIsCiAgICBvblRpdGxlQ2xpY2s6ICRvcHRpb25zLnRpdGxlQ2xpY2sKICB9LCBudWxsLCA4CiAgLyogUFJPUFMgKi8KICAsIFsib25UaXRsZUNsaWNrIl0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9zY3JvbGwsIHsKICAgIGNsYXNzOiAiY29udGVudCIsCiAgICByZWY6ICJzY3JvbGwiLAogICAgInByb2JlLXR5cGUiOiAzLAogICAgb25TY3JvbGw6ICRvcHRpb25zLmNvbnRlbnRTY3JvbGwKICB9LCB7CiAgICBkZWZhdWx0OiBfd2l0aElkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIFtfY3JlYXRlQ29tbWVudFZOb2RlKCIgPGRpdj57eyRzdG9yZS5zdGF0ZS5jYXJ0TGlzdH19PC9kaXY+ICIpLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9kZXRhaWxfc3dpcGVyLCB7CiAgICAgICAgInRvcC1pbWciOiAkZGF0YS50b3BJbWcKICAgICAgfSwgbnVsbCwgOAogICAgICAvKiBQUk9QUyAqLwogICAgICAsIFsidG9wLWltZyJdKSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZGV0YWlsX2Jhc2VfaW5mbywgewogICAgICAgIGdvb2RzOiAkZGF0YS5nb29kcwogICAgICB9LCBudWxsLCA4CiAgICAgIC8qIFBST1BTICovCiAgICAgICwgWyJnb29kcyJdKSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZGV0YWlsX3Nob3BfaW5mbywgewogICAgICAgIHNob3A6ICRkYXRhLnNob3AKICAgICAgfSwgbnVsbCwgOAogICAgICAvKiBQUk9QUyAqLwogICAgICAsIFsic2hvcCJdKSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZGV0YWlsX2dvb2RzX2luZm8sIHsKICAgICAgICAiZGV0YWlsLWluZm8iOiAkZGF0YS5kZXRhaWxJbmZvLAogICAgICAgIG9uSW1nTG9hZDogJG9wdGlvbnMuaW1nTG9hZAogICAgICB9LCBudWxsLCA4CiAgICAgIC8qIFBST1BTICovCiAgICAgICwgWyJkZXRhaWwtaW5mbyIsICJvbkltZ0xvYWQiXSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X2RldGFpbF9wYXJhbV9pbmZvLCB7CiAgICAgICAgInBhcmFtLWluZm8iOiAkZGF0YS5wYXJhbUluZm8sCiAgICAgICAgcmVmOiAiZGV0YWlsX3BhcmFtIgogICAgICB9LCBudWxsLCA4CiAgICAgIC8qIFBST1BTICovCiAgICAgICwgWyJwYXJhbS1pbmZvIl0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9kZXRhaWxfY29tbWVudF9pbmZvLCB7CiAgICAgICAgImNvbW1lbnQtaW5mbyI6ICRkYXRhLmNvbW1lbnRJbmZvLAogICAgICAgIHJlZjogImRldGFpbF9jb21tZW50IgogICAgICB9LCBudWxsLCA4CiAgICAgIC8qIFBST1BTICovCiAgICAgICwgWyJjb21tZW50LWluZm8iXSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X2dvb2RzX2xpc3QsIHsKICAgICAgICBnb29kczogJGRhdGEucmVjb21tZW5kSW5mbywKICAgICAgICByZWY6ICJkZXRhaWxfcmVjb20iCiAgICAgIH0sIG51bGwsIDgKICAgICAgLyogUFJPUFMgKi8KICAgICAgLCBbImdvb2RzIl0pXTsKICAgIH0pLAogICAgXzogMQogICAgLyogU1RBQkxFICovCgogIH0sIDgKICAvKiBQUk9QUyAqLwogICwgWyJvblNjcm9sbCJdKSwgX3dpdGhEaXJlY3RpdmVzKF9jcmVhdGVWTm9kZShfY29tcG9uZW50X2JhY2tfdG9wLCB7CiAgICBvbkNsaWNrOiBfY3R4LmJhY2tDbGljawogIH0sIG51bGwsIDgKICAvKiBQUk9QUyAqLwogICwgWyJvbkNsaWNrIl0pLCBbW192U2hvdywgX2N0eC5pc1Nob3dCYWNrVG9wXV0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9kZXRhaWxfYm90X2JhciwgewogICAgb25BZGRDYXJ0OiAkb3B0aW9ucy5hZGRDYXJ0CiAgfSwgbnVsbCwgOAogIC8qIFBST1BTICovCiAgLCBbIm9uQWRkQ2FydCJdKV0pOwp9KTs="},{"version":3,"sources":["C:\\Users\\17127\\Desktop\\IT\\vue\\教学2\\shopmall\\src\\views\\detail\\GoodsDetail.vue"],"names":[],"mappings":";;;;;;;AACO,EAAA,EAAE,EAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;uBAAR,YAAA,CAeM,KAfN,EAAA,UAAA,EAeM,CAdJ,YAAA,CAAuF,qBAAvF,EAAuF;AAA3E,IAAA,GAAG,EAAC,YAAuE;AAA1D,IAAA,KAAK,EAAC,YAAoD;AAAtC,IAAA,YAAW,EAAE,QAAA,CAAA;AAAyB,GAAvF,E,IAAA,E;;AAAA,I,gBAAA,CAcI,EAbJ,YAAA,CASS,iBATT,EASS;AATD,IAAA,KAAK,EAAC,SASL;AATe,IAAA,GAAG,EAAC,QASnB;AAT6B,kBAAY,CASzC;AAT6C,IAAA,QAAM,EAAE,QAAA,CAAA;AASrD,GATT,E;qBACE;AAAA,aAA6C,CAA7C,mBAAA,CAAA,wCAAA,CAA6C,EAC7C,YAAA,CAAiD,wBAAjD,EAAiD;AAAjC,mBAAS,KAAA,CAAA;AAAwB,OAAjD,EAA+B,IAA/B,EAA+B;AAAA;AAA/B,QAA+B,CAAA,SAAA,CAA/B,CAD6C,EAE7C,YAAA,CAAoD,2BAApD,EAAoD;AAAjC,QAAA,KAAK,EAAE,KAAA,CAAA;AAA0B,OAApD,EAA+B,IAA/B,EAA+B;AAAA;AAA/B,QAA+B,CAAA,OAAA,CAA/B,CAF6C,EAG7C,YAAA,CAAkD,2BAAlD,EAAkD;AAA/B,QAAA,IAAI,EAAE,KAAA,CAAA;AAAyB,OAAlD,EAA6B,IAA7B,EAA6B;AAAA;AAA7B,QAA6B,CAAA,MAAA,CAA7B,CAH6C,EAI7C,YAAA,CAAoF,4BAApF,EAAoF;AAAhE,uBAAa,KAAA,CAAA,UAAmD;AAAtC,QAAA,SAAO,EAAE,QAAA,CAAA;AAA6B,OAApF,E,IAAA,E;;AAAA,Q,4BAAA,CAJ6C,EAK7C,YAAA,CAAkF,4BAAlF,EAAkF;AAA9D,sBAAY,KAAA,CAAA,SAAkD;AAAvC,QAAA,GAAG,EAAC;AAAmC,OAAlF,E,IAAA,E;;AAAA,Q,cAAA,CAL6C,EAM7C,YAAA,CAA4F,8BAA5F,EAA4F;AAAtE,wBAAc,KAAA,CAAA,WAAwD;AAA3C,QAAA,GAAG,EAAC;AAAuC,OAA5F,E,IAAA,E;;AAAA,Q,gBAAA,CAN6C,EAO7C,YAAA,CAAmE,qBAAnE,EAAmE;AAAtD,QAAA,KAAK,EAAE,KAAA,CAAA,aAA+C;AAAhC,QAAA,GAAG,EAAC;AAA4B,OAAnE,E,IAAA,E;;AAAA,Q,SAAA,CAP6C,CAA7C;AAAA,K;;;;GADF,E;;AAAA,I,YAAA,CAaI,E,gBAHJ,YAAA,CAA+D,mBAA/D,EAA+D;AAApD,IAAA,OAAK,EAAE,IAAA,CAAA;AAA6C,GAA/D,EAA2B,IAA3B,EAA2B;AAAA;AAA3B,IAA2B,CAAA,SAAA,CAA3B,C,EAA2B,C,SAAU,IAAA,CAAA,a,CAAV,C,CAGvB,EAFJ,YAAA,CAAqD,yBAArD,EAAqD;AAApC,IAAA,SAAQ,EAAE,QAAA,CAAA;AAA0B,GAArD,EAAkC,IAAlC,EAAkC;AAAA;AAAlC,IAAkC,CAAA,WAAA,CAAlC,CAEI,CAfN,C","sourcesContent":["<template>\r\n  <div id=\"detail\">\r\n    <detail-nav ref=\"detail_nav\" class=\"detail_nav\" @title-click=\"titleClick\"></detail-nav>\r\n    <scroll class=\"content\" ref=\"scroll\" :probe-type=\"3\" @scroll=\"contentScroll\">\r\n      <!-- <div>{{$store.state.cartList}}</div> -->\r\n      <detail-swiper :top-img=\"topImg\"></detail-swiper>\r\n      <detail-base-info :goods=\"goods\"></detail-base-info>\r\n      <detail-shop-info :shop=\"shop\"></detail-shop-info>\r\n      <detail-goods-info :detail-info=\"detailInfo\" @imgLoad=\"imgLoad\"></detail-goods-info>\r\n      <detail-param-info :param-info=\"paramInfo\" ref=\"detail_param\"></detail-param-info>\r\n      <detail-comment-info :comment-info=\"commentInfo\" ref=\"detail_comment\"></detail-comment-info>\r\n      <goods-list :goods=\"recommendInfo\" ref=\"detail_recom\"></goods-list>\r\n    </scroll>\r\n    <back-top @click=\"backClick\" v-show=\"isShowBackTop\"></back-top>\r\n    <detail-bot-bar @add-cart=\"addCart\"></detail-bot-bar>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\n  import DetailNav from '@/components/content/details/DetailNav.vue'\r\n  // import GoodsList from '@/components/content/goods/GoodsList.vue'\r\n  import DetailSwiper from './detailcomp/DetailSwiper.vue'\r\n  import DetailBaseInfo from './detailcomp/DetailBaseInfo.vue'\r\n  import DetailShopInfo from './detailcomp/DetailShopInfo.vue'\r\n  import DetailGoodsInfo from './detailcomp/DetailGoodsInfo.vue'\r\n  import DetailParamInfo from './detailcomp/DetailParamInfo.vue'\r\n  import DetailCommentInfo from './detailcomp/DetailCommentInfo.vue'\r\n  import DetailBotBar from './detailcomp/DetailBotBar.vue'\r\n  import GoodsList from './detailcomp/DetailGoodsList.vue'\r\n  import { getGoodsDetail, getRecommend, Goods, Shop, Param } from '@/network/detail.js'\r\n\r\n  import { debounce } from '@/common/utils.js'\r\n  import { backTopMixin } from '@/common/mixin.js'\r\n  import Scroll from '@/components/common/scroll/Scroll.vue'\r\n  export default {\r\n    name: 'GoodsDetail',\r\n    mixins: [backTopMixin],\r\n    components: {\r\n      DetailNav,\r\n      DetailSwiper,\r\n      DetailBaseInfo,\r\n      DetailShopInfo,\r\n      Scroll,\r\n      DetailGoodsInfo,\r\n      DetailParamInfo,\r\n      DetailCommentInfo,\r\n      GoodsList,\r\n      DetailBotBar\r\n    },\r\n    data() {\r\n      return {\r\n        iid: this.$route.query.id,\r\n        topImg: [],\r\n        goods: {},\r\n        shop: {},\r\n        detailInfo: {},\r\n        paramInfo: {},\r\n        commentInfo: {},\r\n        recommendInfo: [],\r\n        topY: [],\r\n        getTopY: null,\r\n        lessRefresh: null\r\n      }\r\n    },\r\n    methods: {\r\n      addCart() {\r\n        const product = {}\r\n        product.image = this.topImg[0]\r\n        product.title = this.goods.title\r\n        product.desc = this.goods.desc\r\n        product.price = this.goods.lowNowPrice\r\n        product.iid = this.iid\r\n        this.$store.dispatch('addCart', product).then(res => { console.log(res) })\r\n      },\r\n      imgLoad() {\r\n        this.lessRefresh()\r\n        this.getTopY()\r\n        // console.log(this.navY);\r\n      },\r\n      titleClick(index) {\r\n        console.log(index);\r\n        this.$refs.scroll.scroll.scrollTo(0, -this.topY[index], 500)\r\n      },\r\n\r\n      contentScroll(position) {\r\n        const y = -position.y\r\n        for (let i in this.topY) {\r\n          let x = parseInt(i)\r\n          if (y >= this.topY[x] && y < this.topY[x + 1]) {\r\n            this.$refs.detail_nav.currentIndex = x\r\n          }\r\n        }\r\n        this.MixGoBackTop(position)\r\n      },\r\n    },\r\n    created() {\r\n      this.iid = this.$route.query.id\r\n      getGoodsDetail(this.iid).then(res => {\r\n        // console.log(res);\r\n        this.topImg = res.itemInfo.topImages\r\n        // console.log(this.topImg);\r\n        //1. 商品详情\r\n        this.goods = new Goods(res.itemInfo, res.columns, res.shopInfo)\r\n        //2. 商家详情\r\n        this.shop = new Shop(res.shopInfo)\r\n        //3. 获取商品详细信息\r\n        this.detailInfo = res.detailInfo\r\n        //4. 获取参数信息\r\n        this.paramInfo = new Param(res.itemParams.info, res.itemParams.rule)\r\n        //5. 获取评论信息\r\n        if (res.rate.cRate !== 0) {\r\n          this.commentInfo = res.rate.list[0]\r\n        }\r\n      })\r\n      getRecommend().then(res => {\r\n        this.recommendInfo = res.list\r\n      })\r\n      this.getTopY = debounce(() => {\r\n        this.topY = []\r\n        this.topY.push(0)\r\n        this.topY.push(this.$refs.detail_param.$el.offsetTop)\r\n        this.topY.push(this.$refs.detail_comment.$el.offsetTop)\r\n        this.topY.push(this.$refs.detail_recom.$el.offsetTop)\r\n        this.topY.push(Number.MAX_VALUE)\r\n      }, 500)\r\n      this.lessRefresh = debounce(() => {\r\n        this.$refs.scroll.refresh()\r\n      }, 500)\r\n    },\r\n  }\r\n</script>\r\n<style scoped>\r\n  #detail {\r\n    position: relative;\r\n    z-index: 9;\r\n    background-color: #fff;\r\n    height: 100vh;\r\n  }\r\n\r\n  .item_img {\r\n    height: 200px;\r\n    width: 50px;\r\n  }\r\n\r\n  .detail_nav {\r\n    position: relative;\r\n    z-index: 9;\r\n    background-color: #fff;\r\n  }\r\n\r\n  .content {\r\n    height: 85vh;\r\n  }\r\n</style>"],"sourceRoot":""}]}
{"remainingRequest":"C:\\Users\\17127\\Desktop\\IT\\vue\\教学2\\shopmall\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\17127\\Desktop\\IT\\vue\\教学2\\shopmall\\src\\views\\detail\\GoodsDetail.vue?vue&type=style&index=0&id=691c5583&scoped=true&lang=css","dependencies":[{"path":"C:\\Users\\17127\\Desktop\\IT\\vue\\教学2\\shopmall\\src\\views\\detail\\GoodsDetail.vue","mtime":1611712270964},{"path":"C:\\Users\\17127\\Desktop\\IT\\vue\\教学2\\shopmall\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\17127\\Desktop\\IT\\vue\\教学2\\shopmall\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\17127\\Desktop\\IT\\vue\\教学2\\shopmall\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\17127\\Desktop\\IT\\vue\\教学2\\shopmall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\17127\\Desktop\\IT\\vue\\教学2\\shopmall\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogICNkZXRhaWwgew0KICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICB6LWluZGV4OiA5Ow0KICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7DQogICAgaGVpZ2h0OiAxMDB2aDsNCiAgfQ0KDQogIC5pdGVtX2ltZyB7DQogICAgaGVpZ2h0OiAyMDBweDsNCiAgICB3aWR0aDogNTBweDsNCiAgfQ0KDQogIC5kZXRhaWxfbmF2IHsNCiAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgei1pbmRleDogOTsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOw0KICB9DQoNCiAgLmNvbnRlbnQgew0KICAgIGhlaWdodDogODV2aDsNCiAgfQ0K"},{"version":3,"sources":["C:\\Users\\17127\\Desktop\\IT\\vue\\教学2\\shopmall\\src\\views\\detail\\GoodsDetail.vue"],"names":[],"mappings":";EAsIE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACN,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;IACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACtB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EACf;;EAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACR,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IACb,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACb;;EAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;IACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACxB;;EAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACP,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACd","file":"C:/Users/17127/Desktop/IT/vue/教学2/shopmall/src/views/detail/GoodsDetail.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <div id=\"detail\">\r\n    <detail-nav ref=\"detail_nav\" class=\"detail_nav\" @title-click=\"titleClick\"></detail-nav>\r\n    <scroll class=\"content\" ref=\"scroll\" :probe-type=\"3\" @scroll=\"contentScroll\">\r\n      <!-- <div>{{$store.state.cartList}}</div> -->\r\n      <detail-swiper :top-img=\"topImg\"></detail-swiper>\r\n      <detail-base-info :goods=\"goods\"></detail-base-info>\r\n      <detail-shop-info :shop=\"shop\"></detail-shop-info>\r\n      <detail-goods-info :detail-info=\"detailInfo\" @imgLoad=\"imgLoad\"></detail-goods-info>\r\n      <detail-param-info :param-info=\"paramInfo\" ref=\"detail_param\"></detail-param-info>\r\n      <detail-comment-info :comment-info=\"commentInfo\" ref=\"detail_comment\"></detail-comment-info>\r\n      <goods-list :goods=\"recommendInfo\" ref=\"detail_recom\"></goods-list>\r\n    </scroll>\r\n    <back-top @click=\"backClick\" v-show=\"isShowBackTop\"></back-top>\r\n    <detail-bot-bar @add-cart=\"addCart\"></detail-bot-bar>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\n  import DetailNav from '@/components/content/details/DetailNav.vue'\r\n  // import GoodsList from '@/components/content/goods/GoodsList.vue'\r\n  import DetailSwiper from './detailcomp/DetailSwiper.vue'\r\n  import DetailBaseInfo from './detailcomp/DetailBaseInfo.vue'\r\n  import DetailShopInfo from './detailcomp/DetailShopInfo.vue'\r\n  import DetailGoodsInfo from './detailcomp/DetailGoodsInfo.vue'\r\n  import DetailParamInfo from './detailcomp/DetailParamInfo.vue'\r\n  import DetailCommentInfo from './detailcomp/DetailCommentInfo.vue'\r\n  import DetailBotBar from './detailcomp/DetailBotBar.vue'\r\n  import GoodsList from './detailcomp/DetailGoodsList.vue'\r\n  import { getGoodsDetail, getRecommend, Goods, Shop, Param } from '@/network/detail.js'\r\n\r\n  import { debounce } from '@/common/utils.js'\r\n  import { backTopMixin } from '@/common/mixin.js'\r\n  import Scroll from '@/components/common/scroll/Scroll.vue'\r\n  export default {\r\n    name: 'GoodsDetail',\r\n    mixins: [backTopMixin],\r\n    components: {\r\n      DetailNav,\r\n      DetailSwiper,\r\n      DetailBaseInfo,\r\n      DetailShopInfo,\r\n      Scroll,\r\n      DetailGoodsInfo,\r\n      DetailParamInfo,\r\n      DetailCommentInfo,\r\n      GoodsList,\r\n      DetailBotBar\r\n    },\r\n    data() {\r\n      return {\r\n        iid: this.$route.query.id,\r\n        topImg: [],\r\n        goods: {},\r\n        shop: {},\r\n        detailInfo: {},\r\n        paramInfo: {},\r\n        commentInfo: {},\r\n        recommendInfo: [],\r\n        topY: [],\r\n        getTopY: null,\r\n        lessRefresh: null\r\n      }\r\n    },\r\n    methods: {\r\n      addCart() {\r\n        const product = {}\r\n        product.image = this.topImg[0]\r\n        product.title = this.goods.title\r\n        product.desc = this.goods.desc\r\n        product.price = this.goods.lowNowPrice\r\n        product.iid = this.iid\r\n        this.$store.dispatch('addCart', product).then(res => { console.log(res) })\r\n      },\r\n      imgLoad() {\r\n        this.lessRefresh()\r\n        this.getTopY()\r\n        // console.log(this.navY);\r\n      },\r\n      titleClick(index) {\r\n        console.log(index);\r\n        this.$refs.scroll.scroll.scrollTo(0, -this.topY[index], 500)\r\n      },\r\n\r\n      contentScroll(position) {\r\n        const y = -position.y\r\n        for (let i in this.topY) {\r\n          let x = parseInt(i)\r\n          if (y >= this.topY[x] && y < this.topY[x + 1]) {\r\n            this.$refs.detail_nav.currentIndex = x\r\n          }\r\n        }\r\n        this.MixGoBackTop(position)\r\n      },\r\n    },\r\n    created() {\r\n      this.iid = this.$route.query.id\r\n      getGoodsDetail(this.iid).then(res => {\r\n        // console.log(res);\r\n        this.topImg = res.itemInfo.topImages\r\n        // console.log(this.topImg);\r\n        //1. 商品详情\r\n        this.goods = new Goods(res.itemInfo, res.columns, res.shopInfo)\r\n        //2. 商家详情\r\n        this.shop = new Shop(res.shopInfo)\r\n        //3. 获取商品详细信息\r\n        this.detailInfo = res.detailInfo\r\n        //4. 获取参数信息\r\n        this.paramInfo = new Param(res.itemParams.info, res.itemParams.rule)\r\n        //5. 获取评论信息\r\n        if (res.rate.cRate !== 0) {\r\n          this.commentInfo = res.rate.list[0]\r\n        }\r\n      })\r\n      getRecommend().then(res => {\r\n        this.recommendInfo = res.list\r\n      })\r\n      this.getTopY = debounce(() => {\r\n        this.topY = []\r\n        this.topY.push(0)\r\n        this.topY.push(this.$refs.detail_param.$el.offsetTop)\r\n        this.topY.push(this.$refs.detail_comment.$el.offsetTop)\r\n        this.topY.push(this.$refs.detail_recom.$el.offsetTop)\r\n        this.topY.push(Number.MAX_VALUE)\r\n      }, 500)\r\n      this.lessRefresh = debounce(() => {\r\n        this.$refs.scroll.refresh()\r\n      }, 500)\r\n    },\r\n  }\r\n</script>\r\n<style scoped>\r\n  #detail {\r\n    position: relative;\r\n    z-index: 9;\r\n    background-color: #fff;\r\n    height: 100vh;\r\n  }\r\n\r\n  .item_img {\r\n    height: 200px;\r\n    width: 50px;\r\n  }\r\n\r\n  .detail_nav {\r\n    position: relative;\r\n    z-index: 9;\r\n    background-color: #fff;\r\n  }\r\n\r\n  .content {\r\n    height: 85vh;\r\n  }\r\n</style>"]}]}